window.cloneTo=function(e,n,r){var t=$.Deferred();return $.ajax({url:e+".html",dataType:"html",success:function(e){var o=$(e).find(n).clone();$(r).append(o),t.resolve(o)},error:function(e,n,r){console.error("Произошла ошибка при загрузке файла:",r),t.reject()}}),t.promise()},$.fn.insertFrom=function(e,n){var r=this;return cloneTo(e,n,r).then(function(e){return $(e)})},window.replaceWithClone=function(e,n,r){var t=$.Deferred();return $.ajax({url:e+".html",dataType:"html",success:function(e){var o=$(e).find(n).clone();$(r).empty().append(o),t.resolve(o)},error:function(e,n,r){console.error("Произошла ошибка при загрузке файла:",r),t.reject()}}),t.promise()},$.fn.refillWith=function(e,n,r,t){var o=this;if("function"!=typeof r)return replaceWithClone(e,n,o);r(),replaceWithClone(e,n,o),t()},window.reInitScripts=function(){var e=["app/core.js","app/init.js"];$("script").each(function(){var n=$(this).attr("src");n&&-1!==e.indexOf(n)&&$.getScript(n,function(e,r,t){console.log("Скрипт "+n+" успешно загружен.")}).fail(function(e,r,t){console.error("Ошибка загрузки скрипта "+n+": "+t)})})},window.changeMode=function(e){if(e.includes("&")){if(e.includes("&")){var n=e.split("&"),r=(e=n[0],n[1]);history.replaceState({},null,"?mode="+e+"&select="+r)}}else history.replaceState({},null,"?mode="+e);reInitScripts()},$(document).on("click","[nk-page]",function(){var e=$(this).attr("nk-page");changeMode(e)});